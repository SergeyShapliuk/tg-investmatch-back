name: üîÑ Keep Two Servers Alive (8:00-20:00)

on:
  # –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ (UTC+3)
  schedule:
    # 8:00-20:00 MSK = 5:00-17:00 UTC, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
    - cron: '*/30 5-17 * * *'

  # –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è
  workflow_dispatch:
    inputs:
      skip_time_check:
        description: 'Skip business hours check (ping anyway)'
        required: false
        default: 'false'

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ä–µ–¥—ã –¥–ª—è –≤—Å–µ–≥–æ workflow
env:
  TIMEZONE: 'Europe/Moscow'  # –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ä–µ–º–µ–Ω–∏
  BUSINESS_HOURS_START: 8    # –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è (–º–µ—Å—Ç–Ω–æ–µ –≤—Ä–µ–º—è)
  BUSINESS_HOURS_END: 20     # –ö–æ–Ω–µ—Ü —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è (–º–µ—Å—Ç–Ω–æ–µ –≤—Ä–µ–º—è)

jobs:
  ping-servers:
    # –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º Ubuntu –æ—Ç GitHub
    runs-on: ubuntu-latest

    # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è 10 –º–∏–Ω—É—Ç–∞–º–∏
    timeout-minutes: 10

    steps:
      # –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏–º—Å—è –ª–∏ –º—ã –≤ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è
      - name: ‚è∞ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è
        id: check_time
        # –≠—Ç–æ—Ç —à–∞–≥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º –∑–∞–ø—É—Å–∫–µ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
        if: github.event_name == 'schedule'
        run: |
          # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤ UTC
          CURRENT_HOUR_UTC=$(date -u +%H)
          echo "–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è UTC: $CURRENT_HOUR_UTC"

          # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ (UTC+3)
          CURRENT_HOUR_MSK=$((10#$CURRENT_HOUR_UTC + 3))

          # –ï—Å–ª–∏ –ø–æ–ª—É—á–∏–ª–æ—Å—å 24 –∏–ª–∏ –±–æ–ª—å—à–µ, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º
          if [ $CURRENT_HOUR_MSK -ge 24 ]; then
            CURRENT_HOUR_MSK=$((CURRENT_HOUR_MSK - 24))
          fi

          echo "–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è: $CURRENT_HOUR_MSK"

          # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–ø–∞–¥–∞–µ–º –ª–∏ –≤ —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã 8:00-20:00
          if [ $CURRENT_HOUR_MSK -ge ${{ env.BUSINESS_HOURS_START }} ] && [ $CURRENT_HOUR_MSK -lt ${{ env.BUSINESS_HOURS_END }} ]; then
            echo "‚úÖ –í–Ω—É—Ç—Ä–∏ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤ (8:00-20:00 –ú–°–ö)"
            echo "should_ping=true" >> $GITHUB_OUTPUT
            echo "msk_time=$CURRENT_HOUR_MSK" >> $GITHUB_OUTPUT
          else
            echo "‚è∞ –í–Ω–µ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤ - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º"
            echo "should_ping=false" >> $GITHUB_OUTPUT
            echo "msk_time=$CURRENT_HOUR_MSK" >> $GITHUB_OUTPUT
          fi

      # –®–∞–≥ 2: –ü–∏–Ω–≥ –ø–µ—Ä–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
      - name: üì° –ü–∏–Ω–≥–Ω—É—Ç—å –°–µ—Ä–≤–µ—Ä 1 (–û—Å–Ω–æ–≤–Ω–æ–π API)
        id: ping_server_1
        # –í—ã–ø–æ–ª–Ω—è–µ–º –µ—Å–ª–∏:
        # 1. –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –ò–õ–ò
        # 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –≤ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è
        if: github.event_name == 'workflow_dispatch' || steps.check_time.outputs.should_ping == 'true'
        env:
          # –ë–µ—Ä–µ–º URL –∏–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤ GitHub
          SERVER_1_URL: ${{ secrets.SERVER_1_URL }}
#          # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
#          SERVER_1_TOKEN: ${{ secrets.SERVER_1_TOKEN }}
        run: |
          echo "üöÄ –ù–∞—á–∏–Ω–∞—é –ø–∏–Ω–≥ –°–µ—Ä–≤–µ—Ä–∞ 1..."

          # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ URL
          if [ -z "$SERVER_1_URL" ]; then
            echo "‚ùå –û–®–ò–ë–ö–ê: SERVER_1_URL –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö!"
            echo "status=error" >> $GITHUB_OUTPUT
            echo "message=SERVER_1_URL –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω" >> $GITHUB_OUTPUT
            exit 0  # –ù–µ –ø—Ä–µ—Ä—ã–≤–∞–µ–º –≤–µ—Å—å workflow
          fi

          echo "URL: $SERVER_1_URL"

          # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
          HEADERS=""
          if [ -n "$SERVER_1_TOKEN" ]; then
            HEADERS="-H 'Authorization: Bearer $SERVER_1_TOKEN'"
            echo "–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏"
          fi

          # –í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å —Å —Ç–∞–π–º–∞—É—Ç–æ–º 30 —Å–µ–∫—É–Ω–¥
          # 3 –ø–æ–ø—ã—Ç–∫–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –º–µ–∂–¥—É –Ω–∏–º–∏
          for ATTEMPT in {1..3}; do
            echo "–ü–æ–ø—ã—Ç–∫–∞ $ATTEMPT/3..."

            # –í—ã–ø–æ–ª–Ω—è–µ–º HTTP –∑–∞–ø—Ä–æ—Å –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            RESPONSE=$(eval "curl -s $HEADERS \
              -w 'HTTP_CODE:%{http_code}|TIME:%{time_total}' \
              --max-time 30 \
              '$SERVER_1_URL'" 2>/dev/null || true)

            # –ò–∑–≤–ª–µ–∫–∞–µ–º HTTP –∫–æ–¥ –∏–∑ –æ—Ç–≤–µ—Ç–∞
            HTTP_CODE=$(echo "$RESPONSE" | grep -o 'HTTP_CODE:[0-9]*' | cut -d: -f2)

            # –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞
            if [ -n "$HTTP_CODE" ]; then
              if [ "$HTTP_CODE" -ge 200 ] && [ "$HTTP_CODE" -lt 300 ]; then
                # –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç 2xx
                RESPONSE_TIME=$(echo "$RESPONSE" | grep -o 'TIME:[0-9.]*' | cut -d: -f2)
                echo "‚úÖ –°–µ—Ä–≤–µ—Ä 1 –æ—Ç–≤–µ—Ç–∏–ª —É—Å–ø–µ—à–Ω–æ!"
                echo "HTTP –∫–æ–¥: $HTTP_CODE"
                echo "–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: ${RESPONSE_TIME} —Å–µ–∫—É–Ω–¥"
                echo "status=success" >> $GITHUB_OUTPUT
                echo "http_code=$HTTP_CODE" >> $GITHUB_OUTPUT
                echo "response_time=$RESPONSE_TIME" >> $GITHUB_OUTPUT
                break  # –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞ –ø–æ–ø—ã—Ç–æ–∫
              elif [ "$HTTP_CODE" -ge 500 ]; then
                # –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ 5xx - –ø—Ä–æ–±—É–µ–º —Å–Ω–æ–≤–∞
                echo "‚ö†Ô∏è –°–µ—Ä–≤–µ—Ä 1 –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É $HTTP_CODE"
                if [ $ATTEMPT -lt 3 ]; then
                  sleep 5  # –ñ–¥–µ–º –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–ø—ã—Ç–∫–æ–π
                fi
              else
                # –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –æ—à–∏–±–∫–∞ 4xx - –Ω–µ –ø—Ä–æ–±—É–µ–º —Å–Ω–æ–≤–∞
                echo "‚ö†Ô∏è –°–µ—Ä–≤–µ—Ä 1 –≤–µ—Ä–Ω—É–ª –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –æ—à–∏–±–∫—É $HTTP_CODE"
                echo "status=client_error" >> $GITHUB_OUTPUT
                echo "http_code=$HTTP_CODE" >> $GITHUB_OUTPUT
                break
              fi
            else
              # –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å HTTP –∫–æ–¥
              echo "‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç –æ—Ç –°–µ—Ä–≤–µ—Ä–∞ 1"
              if [ $ATTEMPT -lt 3 ]; then
                sleep $((ATTEMPT * 2))  # –£–≤–µ–ª–∏—á–∏–≤–∞—é—â–∞—è—Å—è –∑–∞–¥–µ—Ä–∂–∫–∞
              fi
            fi

            # –ï—Å–ª–∏ —ç—Ç–æ –ø–æ—Å–ª–µ–¥–Ω—è—è –ø–æ–ø—ã—Ç–∫–∞ –∏ –Ω–µ —É–¥–∞–ª–æ—Å—å
            if [ $ATTEMPT -eq 3 ]; then
              echo "‚ùå –°–µ—Ä–≤–µ—Ä 1 –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª –ø–æ—Å–ª–µ 3 –ø–æ–ø—ã—Ç–æ–∫"
              echo "status=failed" >> $GITHUB_OUTPUT
            fi
          done

      # –®–∞–≥ 3: –ü–∏–Ω–≥ –≤—Ç–æ—Ä–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
      - name: üì° –ü–∏–Ω–≥–Ω—É—Ç—å –°–µ—Ä–≤–µ—Ä 2 (–†–µ–∑–µ—Ä–≤–Ω—ã–π/–í—Ç–æ—Ä–æ–π API)
        id: ping_server_2
        if: github.event_name == 'workflow_dispatch' || steps.check_time.outputs.should_ping == 'true'
        env:
          SERVER_2_URL: ${{ secrets.SERVER_2_URL }}
          SERVER_2_TOKEN: ${{ secrets.SERVER_2_TOKEN }}
        run: |
          echo "üöÄ –ù–∞—á–∏–Ω–∞—é –ø–∏–Ω–≥ –°–µ—Ä–≤–µ—Ä–∞ 2..."

          if [ -z "$SERVER_2_URL" ]; then
            echo "‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: SERVER_2_URL –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
            echo "status=skipped" >> $GITHUB_OUTPUT
            echo "message=URL –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω" >> $GITHUB_OUTPUT
            exit 0
          fi

          echo "URL: $SERVER_2_URL"

          # –ë–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
          START_TIME=$(date +%s)

          # –ò—Å–ø–æ–ª—å–∑—É–µ–º wget –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É curl
          HTTP_CODE=$(wget --spider \
            --server-response \
            --timeout=30 \
            --tries=2 \
            "$SERVER_2_URL" 2>&1 | \
            grep -o 'HTTP/[0-9.]* [0-9]*' | \
            tail -1 | \
            awk '{print $2}' || echo "000")

          END_TIME=$(date +%s)
          RESPONSE_TIME=$((END_TIME - START_TIME))

          if [ "$HTTP_CODE" = "200" ] || [ "$HTTP_CODE" = "201" ] || [ "$HTTP_CODE" = "204" ]; then
            echo "‚úÖ –°–µ—Ä–≤–µ—Ä 2 —Ä–∞–±–æ—Ç–∞–µ—Ç!"
            echo "HTTP –∫–æ–¥: $HTTP_CODE"
            echo "–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: ${RESPONSE_TIME} —Å–µ–∫—É–Ω–¥"
            echo "status=success" >> $GITHUB_OUTPUT
            echo "http_code=$HTTP_CODE" >> $GITHUB_OUTPUT
          elif [ "$HTTP_CODE" = "000" ]; then
            echo "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –°–µ—Ä–≤–µ—Ä—É 2"
            echo "status=connection_failed" >> $GITHUB_OUTPUT
          else
            echo "‚ö†Ô∏è –°–µ—Ä–≤–µ—Ä 2 –≤–µ—Ä–Ω—É–ª –∫–æ–¥: $HTTP_CODE"
            echo "status=http_error" >> $GITHUB_OUTPUT
            echo "http_code=$HTTP_CODE" >> $GITHUB_OUTPUT
          fi

      # –®–∞–≥ 4: –û—Ç—á–µ—Ç –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏
      - name: üìä –ü–æ–∫–∞–∑–∞—Ç—å –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç
        if: always()  # –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞, –¥–∞–∂–µ –µ—Å–ª–∏ –±—ã–ª–∏ –æ—à–∏–±–∫–∏
        run: |
          echo ""
          echo "========================================="
          echo "           üìã –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢"
          echo "========================================="
          echo ""
          echo "üïê –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: $(date)"
          echo "üåç –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å: ${{ env.TIMEZONE }}"
          echo "‚è∞ –õ–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –ú–°–ö: ${{ steps.check_time.outputs.msk_time || 'N/A' }}"
          echo ""
          echo "üì° –°–¢–ê–¢–£–° –°–ï–†–í–ï–†–û–í:"
          echo "-------------------"

          # –°—Ç–∞—Ç—É—Å –°–µ—Ä–≤–µ—Ä–∞ 1
          if [ -n "${{ steps.ping_server_1.outputs.status }}" ]; then
            echo "–°–µ—Ä–≤–µ—Ä 1: ${{ steps.ping_server_1.outputs.status }}"
            if [ "${{ steps.ping_server_1.outputs.http_code }}" != "" ]; then
              echo "  HTTP –∫–æ–¥: ${{ steps.ping_server_1.outputs.http_code }}"
            fi
            if [ "${{ steps.ping_server_1.outputs.response_time }}" != "" ]; then
              echo "  –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: ${{ steps.ping_server_1.outputs.response_time }}—Å"
            fi
          else
            echo "–°–µ—Ä–≤–µ—Ä 1: –ù–µ –∑–∞–ø—É—Å–∫–∞–ª—Å—è"
          fi

          echo ""

          # –°—Ç–∞—Ç—É—Å –°–µ—Ä–≤–µ—Ä–∞ 2
          if [ -n "${{ steps.ping_server_2.outputs.status }}" ]; then
            echo "–°–µ—Ä–≤–µ—Ä 2: ${{ steps.ping_server_2.outputs.status }}"
            if [ "${{ steps.ping_server_2.outputs.http_code }}" != "" ]; then
              echo "  HTTP –∫–æ–¥: ${{ steps.ping_server_2.outputs.http_code }}"
            fi
          else
            echo "–°–µ—Ä–≤–µ—Ä 2: –ù–µ –∑–∞–ø—É—Å–∫–∞–ª—Å—è"
          fi

          echo ""
          echo "========================================="

          # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –±—ã–ª–∏ –ª–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
          if [ "${{ steps.ping_server_1.outputs.status }}" = "error" ] || \
             [ "${{ steps.ping_server_1.outputs.status }}" = "failed" ] || \
             [ "${{ steps.ping_server_2.outputs.status }}" = "connection_failed" ]; then
            echo "‚ö†Ô∏è –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º!"
          else
            echo "‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã"
          fi

      # –®–∞–≥ 5: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–∞—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
      - name: üö® –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
        if: failure()  # –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ workflow –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π
        uses: actions/github-script@v6
        with:
          script: |
            const server1Status = "${{ steps.ping_server_1.outputs.status }}";
            const server2Status = "${{ steps.ping_server_2.outputs.status }}";

            let errorMessage = "‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤!\n\n";
            errorMessage += `Workflow: ${context.workflow}\n`;
            errorMessage += `–ó–∞–ø—É—Å–∫: ${context.runId}\n`;
            errorMessage += `–í—Ä–µ–º—è: ${new Date().toLocaleString()}\n\n`;

            if (server1Status === 'error' || server1Status === 'failed') {
              errorMessage += "üî¥ –°–µ—Ä–≤–µ—Ä 1: –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è\n";
            }
            if (server2Status === 'connection_failed') {
              errorMessage += "üî¥ –°–µ—Ä–≤–µ—Ä 2: –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è\n";
            }

            // –°–æ–∑–¥–∞–µ–º issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
            github.rest.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: 'üö® –û—à–∏–±–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤',
              body: errorMessage,
              labels: ['server-alert', 'automation']
            });

            console.log("–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ");

      # –®–∞–≥ 6: –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–æ–ø—É—Å–∫–µ (–µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è)
      - name: üí§ –ü—Ä–æ–ø—É—Å–∫ (–Ω–µ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è)
        if: steps.check_time.outputs.should_ping == 'false' && github.event_name == 'schedule'
        run: |
          echo ""
          echo "========================================="
          echo "           üí§ –†–ê–ë–û–ß–ò–ô –î–ï–ù–¨ –ó–ê–í–ï–†–®–ï–ù"
          echo "========================================="
          echo ""
          echo "–°–µ–π—á–∞—Å ${{ steps.check_time.outputs.msk_time }}:00 –ø–æ –ú–æ—Å–∫–≤–µ"
          echo "–†–∞–±–æ—á–∏–µ —á–∞—Å—ã: 8:00 - 20:00 –ú–°–ö"
          echo ""
          echo "–°–ª–µ–¥—É—é—â–∏–π –ø–∏–Ω–≥ –±—É–¥–µ—Ç –≤ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è."
          echo "–ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ, –Ω–∞–∂–º–∏—Ç–µ:"
          echo "1. –í–∫–ª–∞–¥–∫–∞ 'Actions'"
          echo "2. –í—ã–±–µ—Ä–∏—Ç–µ —ç—Ç–æ—Ç workflow"
          echo "3. –ù–∞–∂–º–∏—Ç–µ 'Run workflow'"
          echo "4. –ü–æ—Å—Ç–∞–≤—å—Ç–µ 'skip_time_check: true'"
          echo ""
          echo "========================================="
